import{w as t,S as e,i as n,s as i,e as l,a as o,b as r,c as s,d as a,f as u,l as c,g as d,t as m,p,h as f,j as g,n as y,k as h,r as b,m as x,o as $,q as v,u as w,v as S,x as O,y as k,z as D,A as j,B as I,C,D as T,E,F as q,G as J}from"./vendor.f91c5d8a.js";const M=t(function(){const t=localStorage.getItem("sets")||"{}";return JSON.parse(t)}());M.subscribe((function(t){const e=JSON.stringify(t);localStorage.setItem("sets",e)}));const N=t(function(){const t=localStorage.getItem("set")||"null";return JSON.parse(t)}());function A(t=new Date){return new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().slice(0,-5)}function P(t,e){return[...new Set(e.replaceAll(t,"").split(""))]}function z(t,e,n){const i=t.slice();return i[21]=e[n],i[22]=e,i[23]=n,i}function B(t){let e,n,i,m,p,f;function g(){t[15].call(n,t[22],t[23])}let y=t[23]%2==0&&function(t){let e,n,i;return{c(){e=l("button"),e.textContent="Ã—",r(e,"type","button")},m(l,o){s(l,e,o),n||(i=c(e,"click",t[9].bind(null,t[23])),n=!0)},p(e,n){t=e},d(t){t&&d(e),n=!1,i()}}}(t);return{c(){e=l("li"),n=l("input"),m=o(),y&&y.c(),r(n,"type","datetime-local"),r(n,"id",i=`timestamps[${t[23]}]`),r(n,"name","timestamps[]"),r(n,"step","1"),n.required=!0},m(i,l){s(i,e,l),a(e,n),u(n,t[21]),a(e,m),y&&y.m(e,null),p||(f=c(n,"input",g),p=!0)},p(e,i){t=e,4&i&&u(n,t[21]),t[23]%2==0&&y.p(t,i)},d(t){t&&d(e),y&&y.d(),p=!1,f()}}}function F(t){let e,n,i;return{c(){e=l("li"),n=l("input"),n.readOnly=!0,r(n,"type","datetime-local"),n.value=i=A(t[1]),r(n,"step","1")},m(t,i){s(t,e,i),a(e,n)},p(t,e){2&e&&i!==(i=A(t[1]))&&(n.value=i)},d(t){t&&d(e)}}}function L(t){let e,n,i;return{c(){e=l("input"),n=o(),i=l("input"),r(e,"type","submit"),r(e,"name","submit"),e.value="Save",r(i,"type","submit"),r(i,"name","cancel"),i.value="Cancel"},m(t,l){s(t,e,l),s(t,n,l),s(t,i,l)},d(t){t&&d(e),t&&d(n),t&&d(i)}}}function R(t){let e,n,i;return{c(){e=l("input"),n=o(),i=l("input"),r(e,"type","submit"),r(e,"name","submit"),e.value="Done",r(i,"type","submit"),r(i,"name","delete"),i.value="Delete"},m(t,l){s(t,e,l),s(t,n,l),s(t,i,l)},d(t){t&&d(e),t&&d(n),t&&d(i)}}}function _(t){let e,n,i,x,$,v,w,S,O,k,D,j,I,C,T,E,q,J,M,N,A,P,_,G,U,W,H,K,Q,V,X,Y,Z,tt,et,nt,it,lt,ot,rt,st,at,ut,ct,dt,mt,pt,ft,gt,yt=t[5].exertion+"",ht=t[4].text+"",bt=t[3]?"Stop":"Start",xt=t[2],$t=[];for(let l=0;l<xt.length;l+=1)$t[l]=B(z(t,xt,l));let vt=t[3]&&F(t);function wt(t,e){return t[5].id in t[6]?R:L}let St=wt(t),Ot=St(t);return{c(){e=l("form"),n=l("div"),i=l("label"),i.textContent="Exercise",x=o(),$=l("input"),v=o(),w=l("div"),S=l("label"),S.textContent="Modality",O=o(),k=l("input"),D=o(),j=l("div"),I=l("label"),I.textContent="Repetitions",C=o(),T=l("input"),E=o(),q=l("div"),J=l("label"),J.textContent="Workload",M=o(),N=l("input"),A=o(),P=l("div"),_=l("label"),G=m("Exertion "),U=l("span"),W=m("("),H=m(yt),K=m(")"),Q=o(),V=l("input"),X=o(),Y=l("div"),Z=l("details"),tt=l("summary"),et=l("span"),nt=m(ht),lt=o(),ot=l("button"),rt=m(bt),st=m(" Timer"),at=o(),ut=l("ol");for(let t=0;t<$t.length;t+=1)$t[t].c();ct=o(),vt&&vt.c(),dt=o(),mt=l("input"),pt=o(),Ot.c(),r(i,"for","exercise"),r($,"type","text"),r($,"id","exercise"),r($,"name","exercise"),$.required=!0,r(S,"for","modality"),r(k,"type","text"),r(k,"id","modality"),r(k,"name","modality"),r(I,"for","repetitions"),r(T,"type","number"),r(T,"id","repetitions"),r(T,"name","repetitions"),r(T,"min","0"),r(T,"max","9999"),r(T,"step","1"),T.required=!0,r(J,"for","workload"),r(N,"type","number"),r(N,"id","workload"),r(N,"name","workload"),r(N,"min","0"),r(N,"max","9999"),N.required=!0,r(_,"for","exertion"),r(V,"type","range"),r(V,"id","exertion"),r(V,"name","exertion"),r(V,"min","0"),r(V,"max","10"),V.required=!0,r(et,"title",it=t[4].description),r(ot,"type","button"),r(mt,"type","hidden"),r(e,"id",t[0])},m(l,o){s(l,e,o),a(e,n),a(n,i),a(n,x),a(n,$),u($,t[5].exercise),a(e,v),a(e,w),a(w,S),a(w,O),a(w,k),u(k,t[5].modality),a(e,D),a(e,j),a(j,I),a(j,C),a(j,T),u(T,t[5].repetitions),a(e,E),a(e,q),a(q,J),a(q,M),a(q,N),u(N,t[5].workload),a(e,A),a(e,P),a(P,_),a(_,G),a(_,U),a(U,W),a(U,H),a(U,K),a(P,Q),a(P,V),u(V,t[5].exertion),a(e,X),a(e,Y),a(Y,Z),a(Z,tt),a(tt,et),a(et,nt),a(tt,lt),a(tt,ot),a(ot,rt),a(ot,st),a(Z,at),a(Z,ut);for(let t=0;t<$t.length;t+=1)$t[t].m(ut,null);a(ut,ct),vt&&vt.m(ut,null),a(e,dt),a(e,mt),u(mt,t[5].id),a(e,pt),Ot.m(e,null),ft||(gt=[c($,"input",t[10]),c(k,"input",t[11]),c(T,"input",t[12]),c(N,"input",t[13]),c(V,"change",t[14]),c(V,"input",t[14]),c(ot,"click",t[8]),c(mt,"input",t[16]),c(e,"submit",p(t[7]))],ft=!0)},p(t,[n]){if(32&n&&$.value!==t[5].exercise&&u($,t[5].exercise),32&n&&k.value!==t[5].modality&&u(k,t[5].modality),32&n&&f(T.value)!==t[5].repetitions&&u(T,t[5].repetitions),32&n&&f(N.value)!==t[5].workload&&u(N,t[5].workload),32&n&&yt!==(yt=t[5].exertion+"")&&g(H,yt),32&n&&u(V,t[5].exertion),16&n&&ht!==(ht=t[4].text+"")&&g(nt,ht),16&n&&it!==(it=t[4].description)&&r(et,"title",it),8&n&&bt!==(bt=t[3]?"Stop":"Start")&&g(rt,bt),516&n){let e;for(xt=t[2],e=0;e<xt.length;e+=1){const i=z(t,xt,e);$t[e]?$t[e].p(i,n):($t[e]=B(i),$t[e].c(),$t[e].m(ut,ct))}for(;e<$t.length;e+=1)$t[e].d(1);$t.length=xt.length}t[3]?vt?vt.p(t,n):(vt=F(t),vt.c(),vt.m(ut,null)):vt&&(vt.d(1),vt=null),32&n&&u(mt,t[5].id),St!==(St=wt(t))&&(Ot.d(1),Ot=St(t),Ot&&(Ot.c(),Ot.m(e,null))),1&n&&r(e,"id",t[0])},i:y,o:y,d(t){t&&d(e),h($t,t),vt&&vt.d(),Ot.d(),ft=!1,b(gt)}}}function G(t,e,n){let i,l,o,r;var s,a;x(t,N,(t=>n(5,o=t))),x(t,M,(t=>n(6,r=t))),$((()=>{clearInterval(d),d=setInterval((()=>n(1,m=new Date)),250)})),v((()=>{clearInterval(d),d=null}));let{id:u}=e;const c=w();let d=null,m=new Date;S(N,o=u===(null==o?void 0:o.id)?o:null!==(s=r[u])&&void 0!==s?s:{id:u,exercise:"exercise",modality:"modality",repetitions:0,workload:0,exertion:0,timestamps:[]},o);let p=(null!==(a=o.timestamps)&&void 0!==a?a:[]).map((t=>A(new Date(t))));return t.$$set=t=>{"id"in t&&n(0,u=t.id)},t.$$.update=()=>{4&t.$$.dirty&&S(N,o.timestamps=p.map((t=>new Date(t).getTime())),o),6&t.$$.dirty&&n(4,i=function(t){if(t.length<1)return{text:"00:00",description:"no time elapsed"};let e=0;for(let l=0;l<t.length;l+=2){const[n,i]=t.slice(l,l+2),o=(null!=i?i:n).getTime()-n.getTime();if(o<0)return{text:`timestamps disordered after ${n.toLocaleString()}`,description:""};e+=o}e=Math.floor(e/1e3);const n=Math.floor(e/60),i=e%60;return{text:[n,i].map((t=>t.toString().padStart(2,"0"))).join(":"),description:`${n} minutes and ${i} seconds`}}([...p.map((t=>new Date(t))),m])),4&t.$$.dirty&&n(3,l=p.length>0&&p.length%2==1)},[u,m,p,l,i,o,r,function(t){const e=t.submitter.getAttribute("name");switch(e){case"submit":const t=function*(t){let e=[],n=P(/[\w ]+/g,t.exercise);if(n.length&&(yield`Exercise may not include the following characters: ${n}.`,e=[...e]),n=P(/[\w ]+/g,t.modality),n.length&&(e=[...e,`Modality may not include the following characters: ${n}.`]),t.timestamps.length<1&&(e=[...e,"Timestamps missing."]),t.timestamps.length%2==1)e=[...e,"Final timestamp missing."];else for(let i=0;i<t.timestamps.length;i+=2){const[n,l]=t.timestamps.slice(i,i+2);if(l-n<0){e=[...e,`Timestamps disordered after ${A(new Date(n))}`];break}}return e}(o);if(t.length)return void alert(t.join("\n"));c("submit",o);break;case"cancel":c("cancel");break;case"delete":confirm(`Really delete set ${o.id}?`)&&c("delete",o.id);break;default:throw Error(`Unhandled submission type: ${e}`)}},function(){n(2,p=[...p,A()])},function(t){n(2,p=[...p.slice(0,t),...p.slice(t+2)])},function(){o.exercise=this.value,N.set(o)},function(){o.modality=this.value,N.set(o)},function(){o.repetitions=f(this.value),N.set(o)},function(){o.workload=f(this.value),N.set(o)},function(){o.exertion=f(this.value),N.set(o)},function(t,e){t[e]=this.value,n(2,p)},function(){o.id=this.value,N.set(o)}]}N.subscribe((function(t){const e=JSON.stringify(t);localStorage.setItem("set",e)}));class U extends e{constructor(t){super(),n(this,t,G,_,i,{id:0})}}function W(t,e,n){const i=t.slice();return i[4]=e[n],i}function H(t,e){let n,i,r,u,p,f,y,h,b=JSON.stringify(e[4],null,2)+"";return{key:t,first:null,c(){n=l("li"),i=l("pre"),r=m(b),u=o(),p=l("button"),p.textContent="Edit",f=o(),this.first=n},m(t,l){s(t,n,l),a(n,i),a(i,r),a(n,u),a(n,p),a(n,f),y||(h=c(p,"click",(function(){O(e[2].bind(null,e[4].id))&&e[2].bind(null,e[4].id).apply(this,arguments)})),y=!0)},p(t,n){e=t,1&n&&b!==(b=JSON.stringify(e[4],null,2)+"")&&g(r,b)},d(t){t&&d(n),y=!1,h()}}}function K(t){let e,n,i,r,a,u=[],m=new Map,p=Object.values(t[0]);const f=t=>t[4].id;for(let l=0;l<p.length;l+=1){let e=W(t,p,l),n=f(e);m.set(n,u[l]=H(n,e))}return{c(){e=l("button"),e.textContent="Lift",n=o(),i=l("ol");for(let t=0;t<u.length;t+=1)u[t].c()},m(l,o){s(l,e,o),s(l,n,o),s(l,i,o);for(let t=0;t<u.length;t+=1)u[t].m(i,null);r||(a=c(e,"click",t[1]),r=!0)},p(t,[e]){5&e&&(p=Object.values(t[0]),u=k(u,e,f,1,t,p,m,i,D,H,null,W))},i:y,o:y,d(t){t&&d(e),t&&d(n),t&&d(i);for(let e=0;e<u.length;e+=1)u[e].d();r=!1,a()}}}function Q(t,e,n){let i;x(t,M,(t=>n(0,i=t)));const l=w();return[i,function(){l("new-set")},function(t){l("edit-set",t)}]}class V extends e{constructor(t){super(),n(this,t,Q,K,i,{})}}function X(t){let e,n;return e=new V({}),e.$on("new-set",t[1]),e.$on("edit-set",t[2]),{c(){E(e.$$.fragment)},m(t,i){q(e,t,i),n=!0},p:y,i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){j(e.$$.fragment,t),n=!1},d(t){J(e,t)}}}function Y(t){let e,n;return e=new U({props:{id:t[0]}}),e.$on("submit",t[3]),e.$on("cancel",t[4]),e.$on("delete",t[5]),{c(){E(e.$$.fragment)},m(t,i){q(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.id=t[0]),e.$set(i)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){j(e.$$.fragment,t),n=!1},d(t){J(e,t)}}}function Z(t){let e,n,i,o;const r=[Y,X],a=[];function u(t,e){return t[0]?0:1}return n=u(t),i=a[n]=r[n](t),{c(){e=l("main"),i.c()},m(t,i){s(t,e,i),a[n].m(e,null),o=!0},p(t,[l]){let o=n;n=u(t),n===o?a[n].p(t,l):(T(),j(a[o],1,1,(()=>{a[o]=null})),I(),i=a[n],i?i.p(t,l):(i=a[n]=r[n](t),i.c()),C(i,1),i.m(e,null))},i(t){o||(C(i),o=!0)},o(t){j(i),o=!1},d(t){t&&d(e),a[n].d()}}}function tt(t,e,n){let i,l;x(t,M,(t=>n(7,i=t))),x(t,N,(t=>n(6,l=t)));var o=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(t);l<i.length;l++)e.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(n[i[l]]=t[i[l]])}return n};let r=null==l?void 0:l.id;return t.$$.update=()=>{65&t.$$.dirty&&S(N,l=null===r?null:l,l)},[r,function(){n(0,r=`${(new Date).getTime()}.${Math.random()}`)},function(t){n(0,r=t.detail)},function(t){S(M,i[t.detail.id]=t.detail,i),n(0,r=null)},function(){n(0,r=null)},function(t){const e=i,l=t.detail;e[l];const s=o(e,["symbol"==typeof l?l:l+""]);S(M,i=s,i),n(0,r=null)},l]}new class extends e{constructor(t){super(),n(this,t,tt,Z,i,{})}}({target:document.getElementById("app")});
